basePath: /api/v1
definitions:
  anchors.AddItemRequest:
    properties:
      content:
        maxLength: 10000
        type: string
      type:
        enum:
        - url
        - image
        - audio
        - file
        - text
        type: string
      url:
        type: string
    required:
    - type
    type: object
  anchors.Anchor:
    properties:
      cloneCount:
        type: integer
      clonedFromAnchorId:
        type: string
      clonedFromUserId:
        type: string
      commentCount:
        type: integer
      coverMediaType:
        description: '"icon", "emoji", "image"'
        type: string
      coverMediaValue:
        type: string
      createdAt:
        type: string
      deletedAt:
        type: string
      description:
        type: string
      id:
        type: string
      isPinned:
        type: boolean
      itemCount:
        type: integer
      lastItemAddedAt:
        type: string
      likeCount:
        type: integer
      tags:
        items:
          type: string
        type: array
      title:
        type: string
      updatedAt:
        type: string
      userId:
        type: string
      viewCount:
        type: integer
      visibility:
        description: '"private", "unlisted", "public"'
        type: string
    type: object
  anchors.AnchorWithItemsResponse:
    properties:
      anchor:
        $ref: '#/definitions/anchors.Anchor'
      items:
        items:
          $ref: '#/definitions/anchors.Item'
        type: array
    type: object
  anchors.AudioData:
    properties:
      cloudinaryUrl:
        type: string
      duration:
        description: in seconds
        type: integer
      fileSize:
        type: integer
      publicId:
        type: string
    type: object
  anchors.CreateAnchorRequest:
    properties:
      coverMediaType:
        enum:
        - icon
        - emoji
        - image
        type: string
      coverMediaValue:
        type: string
      description:
        maxLength: 500
        type: string
      tags:
        items:
          type: string
        maxItems: 5
        type: array
      title:
        maxLength: 100
        minLength: 3
        type: string
      visibility:
        enum:
        - private
        - unlisted
        - public
        type: string
    required:
    - title
    type: object
  anchors.FileData:
    properties:
      cloudinaryUrl:
        type: string
      fileSize:
        type: integer
      fileType:
        type: string
      filename:
        type: string
      publicId:
        type: string
    type: object
  anchors.ImageData:
    properties:
      cloudinaryUrl:
        type: string
      fileSize:
        type: integer
      height:
        type: integer
      publicId:
        type: string
      width:
        type: integer
    type: object
  anchors.Item:
    properties:
      anchorId:
        type: string
      audioData:
        $ref: '#/definitions/anchors.AudioData'
      createdAt:
        type: string
      fileData:
        $ref: '#/definitions/anchors.FileData'
      id:
        type: string
      imageData:
        $ref: '#/definitions/anchors.ImageData'
      position:
        type: integer
      textData:
        $ref: '#/definitions/anchors.TextData'
      type:
        description: '"url", "image", "audio", "file", "text"'
        type: string
      updatedAt:
        type: string
      urlData:
        $ref: '#/definitions/anchors.URLData'
    type: object
  anchors.PaginatedResponse:
    properties:
      data: {}
      pagination:
        properties:
          hasMore:
            type: boolean
          limit:
            type: integer
          page:
            type: integer
          total:
            type: integer
          totalPages:
            type: integer
        type: object
    type: object
  anchors.ReorderItemsRequest:
    properties:
      itemIds:
        items:
          type: string
        minItems: 1
        type: array
    required:
    - itemIds
    type: object
  anchors.TextData:
    properties:
      content:
        type: string
    type: object
  anchors.URLData:
    properties:
      description:
        type: string
      favicon:
        type: string
      originalUrl:
        type: string
      thumbnail:
        type: string
      title:
        type: string
    type: object
  anchors.UpdateAnchorRequest:
    properties:
      coverMediaType:
        enum:
        - icon
        - emoji
        - image
        type: string
      coverMediaValue:
        type: string
      description:
        maxLength: 500
        type: string
      tags:
        items:
          type: string
        maxItems: 5
        type: array
      title:
        maxLength: 100
        minLength: 3
        type: string
      visibility:
        enum:
        - private
        - unlisted
        - public
        type: string
    type: object
  auth.AuthResponse:
    properties:
      accessToken:
        type: string
      user:
        $ref: '#/definitions/auth.User'
    type: object
  auth.GoogleAuthRequest:
    properties:
      googleIdToken:
        type: string
    required:
    - googleIdToken
    type: object
  auth.UpdateProfileRequest:
    properties:
      bio:
        maxLength: 160
        type: string
      displayName:
        maxLength: 50
        minLength: 3
        type: string
    type: object
  auth.UpdateUsernameRequest:
    properties:
      username:
        maxLength: 20
        minLength: 3
        type: string
    required:
    - username
    type: object
  auth.User:
    properties:
      anchorCount:
        type: integer
      bio:
        type: string
      createdAt:
        type: string
      displayName:
        type: string
      email:
        type: string
      followerCount:
        type: integer
      followingCount:
        type: integer
      googleId:
        type: string
      id:
        type: string
      isVerified:
        type: boolean
      joinedAt:
        type: string
      profilePictureUrl:
        type: string
      updatedAt:
        type: string
      username:
        type: string
      usernameChanged:
        type: boolean
      usernameChangedAt:
        type: string
    type: object
  response.APIResponse:
    properties:
      code:
        example: AUTH_INVALID_TOKEN
        type: string
      data: {}
      message:
        example: OK
        type: string
      statusCode:
        example: 200
        type: integer
      success:
        example: true
        type: boolean
    type: object
host: localhost:8080
info:
  contact: {}
  description: A RESTful API for managing todos with JWT authentication
  title: GoTodo API
  version: "1.0"
paths:
  /anchors:
    get:
      description: List anchors for a user
      parameters:
      - description: User ID (defaults to authenticated user)
        in: query
        name: userId
        type: string
      - description: Page number (default 1)
        in: query
        name: page
        type: integer
      - description: Items per page (default 20, max 50)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.PaginatedResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
      summary: List anchors
      tags:
      - anchors
    post:
      consumes:
      - application/json
      description: Create a new anchor collection
      parameters:
      - description: Anchor details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/anchors.CreateAnchorRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.Anchor'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Create a new anchor
      tags:
      - anchors
  /anchors/{id}:
    delete:
      description: Soft delete an anchor
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Delete anchor
      tags:
      - anchors
    get:
      description: Get a specific anchor with its items
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.AnchorWithItemsResponse'
              type: object
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.APIResponse'
      summary: Get anchor by ID
      tags:
      - anchors
    patch:
      consumes:
      - application/json
      description: Update anchor details
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      - description: Update fields
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/anchors.UpdateAnchorRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.Anchor'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Update anchor
      tags:
      - anchors
  /anchors/{id}/clone:
    post:
      description: Create a deep copy of an anchor and all its items to your account
      parameters:
      - description: Anchor ID to clone
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.Anchor'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Clone an anchor
      tags:
      - anchors
  /anchors/{id}/items:
    get:
      description: Get paginated list of items in an anchor
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      - description: Page number (default 1)
        in: query
        name: page
        type: integer
      - description: Items per page (default 20, max 50)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.PaginatedResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.APIResponse'
      summary: List items in anchor
      tags:
      - anchors
    post:
      consumes:
      - application/json
      description: Add a new item (URL or text) to an anchor. For URL items, metadata
        (title, description, favicon, thumbnail) is automatically fetched.
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      - description: Item details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/anchors.AddItemRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.Item'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Add item to anchor
      tags:
      - anchors
  /anchors/{id}/items/{itemId}:
    delete:
      description: Remove an item from an anchor
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      - description: Item ID
        in: path
        name: itemId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Delete item from anchor
      tags:
      - anchors
  /anchors/{id}/items/reorder:
    patch:
      consumes:
      - application/json
      description: Update the position of items within an anchor. All item IDs must
        be provided in the new desired order.
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      - description: Array of item IDs in new order
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/anchors.ReorderItemsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/anchors.Item'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Reorder items in anchor
      tags:
      - anchors
  /anchors/{id}/items/upload:
    post:
      consumes:
      - multipart/form-data
      description: Upload a file (image, audio, or generic file) and add it as an
        item
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      - description: Item type (image, audio, file)
        in: formData
        name: type
        required: true
        type: string
      - description: File to upload
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.Item'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Upload and add item to anchor
      tags:
      - anchors
  /anchors/{id}/pin:
    patch:
      description: Pin or unpin an anchor
      parameters:
      - description: Anchor ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/anchors.Anchor'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Toggle pin status
      tags:
      - anchors
  /auth/google:
    post:
      consumes:
      - application/json
      description: Authenticate user using Google ID token
      parameters:
      - description: Google ID Token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/auth.GoogleAuthRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/auth.AuthResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.APIResponse'
      summary: Login with Google
      tags:
      - auth
  /auth/me:
    get:
      description: Get the authenticated user's profile
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/auth.User'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Get current user
      tags:
      - auth
  /auth/profile:
    patch:
      consumes:
      - application/json
      description: Update display name and/or bio
      parameters:
      - description: Profile updates
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/auth.UpdateProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/auth.User'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Update user profile
      tags:
      - auth
  /auth/username:
    patch:
      consumes:
      - application/json
      description: Change username (can only be done once)
      parameters:
      - description: New username
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/auth.UpdateUsernameRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/auth.User'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.APIResponse'
      security:
      - BearerAuth: []
      summary: Update username
      tags:
      - auth
schemes:
- http
securityDefinitions:
  BearerAuth:
    description: Type "Bearer <token>"
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
